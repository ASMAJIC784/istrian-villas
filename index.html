<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Istrian Villas</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" />
  <style>
    .image-container {
      cursor: pointer;
      display: block;
    }
    .fancybox__container {
      background: rgba(34, 34, 34, 0.15) !important;
    }
    .villa-modal {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(30, 41, 59, 0.65); /* dark blue overlay */
      justify-content: center;
      align-items: center;
      transition: background 0.3s;
      backdrop-filter: blur(2px);
    }
    .villa-modal.open {
      display: flex;
    }
    .villa-modal-content {
      background: #fff;
      max-width: 540px;
      width: 95vw;
      max-height: 85vh;
      overflow-y: auto;
      border-radius: 18px;
      padding: 2.5rem 2rem 2rem 2rem;
      position: relative;
      box-shadow: 0 8px 40px 0 rgba(30,41,59,0.18), 0 1.5px 6px 0 rgba(30,41,59,0.10);
      animation: modalPopIn 0.35s cubic-bezier(.23,1.01,.32,1) both;
    }
    @keyframes modalPopIn {
      0% { transform: translateY(40px) scale(0.96); opacity: 0; }
      100% { transform: none; opacity: 1; }
    }
    .villa-modal-close {
      position: absolute;
      top: 1.2rem; right: 1.2rem;
      background: #f3f4f6;
      border: none;
      border-radius: 50%;
      width: 2.3rem; height: 2.3rem;
      font-size: 1.5rem;
      cursor: pointer;
      color: #334155;
      box-shadow: 0 2px 8px rgba(30,41,59,0.08);
      transition: background 0.2s, color 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .villa-modal-close:hover {
      background: #225c37;
      color: #fff;
    }
    .villa-modal-content h2 {
      margin-top: 0;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
      color: #225c37;
      letter-spacing: 0.5px;
      text-align: center;
      font-weight: 700;
    }
    .reviews-container {
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
    }
    .review {
      background: #f8fafc;
      border-radius: 12px;
      padding: 1.1rem 1.3rem;
      box-shadow: 0 1.5px 8px rgba(30,41,59,0.06);
      border-left: 4px solid #2d7a4b;
      transition: box-shadow 0.2s;
      position: relative;
    }
    .review-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 600;
      color: #225c37;
      margin-bottom: .5rem;
      font-size: 1.08em;
    }
    .stars {
      color: #FFD700;
      font-size: 1.15em;
      letter-spacing: 1px;
      filter: drop-shadow(0 1px 1px #fff3);
    }
    .review p {
      margin: 0;
      color: #334155;
      font-size: 1em;
      line-height: 1.6;
    }
    @media (max-width: 600px) {
      .villa-modal-content {
        padding: 1.2rem 0.5rem 1.2rem 0.5rem;
        max-width: 98vw;
      }
      .review {
        padding: 0.9rem 0.7rem;
      }
    }
  </style>
</head>
<body>
  <header class="top-header">
    <div class="logo">
      <img src="images/logo.svg" alt="My Istrian Villas Logo">
    </div>
    <nav class="main-nav">
      <ul>
        <li><a href="#villas">Villas</a></li>
        <li><a href="#locations">Our Locations</a></li>
        <li><a href="#contact">Contact Us</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="hero-background">
      <div class="hero-overlay">
        <h2>Welcome to Istrian Villas</h2>
        <p>Experience comfort and luxury in the heart of Istria</p>
      </div>
      <div class="search-box">
        <form>
          <input type="date" name="checkin" placeholder="Check-in" required>
          <input type="date" name="checkout" placeholder="Check-out" required>
          <input type="number" name="guests" placeholder="Guests" min="1" required>
          <button class="btn">Search</button>
        </form>
      </div>
    </section>

    <section class="villas-section" id="villas">
      <h1>Our Villas</h1>
      <div class="villa-cards-stack" style="display: flex; flex-direction: row; gap: 2rem; flex-wrap: nowrap; justify-content: center; align-items: flex-start;">

        <!-- Villa Zara -->
        <div class="villa-with-reviews" style="flex: 1 1 320px; max-width: 350px; min-width: 280px;">
          <div class="villa-card">
            <a data-fancybox="gallery-zara" href="images/Villa_Zara/picture1.jpg" data-caption="Villa Zara - Picture 1" class="image-container">
              <img src="images/Villa_Zara/picture1.jpg" alt="Villa Zara">
              <div class="overlay">
                <p>A beautiful seaside villa with stunning views and modern amenities.</p>
              </div>
            </a>
            <a data-fancybox="gallery-zara" href="images/Villa_Zara/picture2.jpg" data-caption="Villa Zara - Picture 2"></a>
            <a data-fancybox="gallery-zara" href="images/Villa_Zara/picture3.jpg" data-caption="Villa Zara - Picture 3"></a>
            <a data-fancybox="gallery-zara" href="images/Villa_Zara/picture4.jpg" data-caption="Villa Zara - Picture 4"></a>
            <a data-fancybox="gallery-zara" href="images/Villa_Zara/picture5.jpg" data-caption="Villa Zara - Picture 5"></a>
            <a data-fancybox="gallery-zara" href="images/Villa_Zara/picture6.jpg" data-caption="Villa Zara - Picture 6"></a>
            <a data-fancybox="gallery-zara" href="images/Villa_Zara/picture7.jpg" data-caption="Villa Zara - Picture 7"></a>
            <a data-fancybox="gallery-zara" href="images/Villa_Zara/picture8.jpg" data-caption="Villa Zara - Picture 8"></a>
            <h3 class="villa-name-fixed">Villa Zara</h3>
          </div>
          <div class="villa-reviews-summary">
            <div class="review">
              <div class="review-header">
                <span class="reviewer">Callista Marie</span>
                <span class="stars">★★★★★</span>
              </div>
              <p>What an amazing home! Everything is so beautiful and the finishing touches are just stunning. Super comfy beds!</p>
            </div>
            <button class="btn show-all-reviews" data-modal="modal-zara">Show all reviews</button>
          </div>
        </div>

        <!-- Villa Laura -->
        <div class="villa-with-reviews" style="flex: 1 1 320px; max-width: 350px; min-width: 280px;">
          <div class="villa-card">
            <a data-fancybox="gallery-laura" href="images/Villa_Laura/picture1.jpg" data-caption="Villa Laura - Picture 1" class="image-container">
              <img src="images/Villa_Laura/picture1.jpg" alt="Villa Laura">
              <div class="overlay">
                <p>Charming countryside retreat with spacious gardens and a pool.</p>
              </div>
            </a>
            <a data-fancybox="gallery-laura" href="images/Villa_Laura/picture2.jpg" data-caption="Villa Laura - Picture 2"></a>
            <a data-fancybox="gallery-laura" href="images/Villa_Laura/picture3.jpg" data-caption="Villa Laura - Picture 3"></a>
            <a data-fancybox="gallery-laura" href="images/Villa_Laura/picture4.jpg" data-caption="Villa Laura - Picture 4"></a>
            <a data-fancybox="gallery-laura" href="images/Villa_Laura/picture5.jpg" data-caption="Villa Laura - Picture 5"></a>
            <a data-fancybox="gallery-laura" href="images/Villa_Laura/picture6.jpg" data-caption="Villa Laura - Picture 6"></a>
            <a data-fancybox="gallery-laura" href="images/Villa_Laura/picture7.jpg" data-caption="Villa Laura - Picture 7"></a>
            <a data-fancybox="gallery-laura" href="images/Villa_Laura/picture8.jpg" data-caption="Villa Laura - Picture 8"></a>
            <h3 class="villa-name-fixed">Villa Laura</h3>
          </div>
          <div class="villa-reviews-summary">
            <div class="review">
              <div class="review-header">
                <span class="reviewer">Эдита</span>
                <span class="stars">★★★★★</span>
              </div>
              <p>A wonderful villa, fully equipped with everything you need. Modern renovation, each room has its own bathroom, large pool, beautiful view of the vineyards. The owner is very caring and attentive. Highly recommend, will definitely come back!</p>
            </div>
            <button class="btn show-all-reviews" data-modal="modal-laura">Show all reviews</button>
          </div>
        </div>

        <!-- Villa Vale -->
        <div class="villa-with-reviews" style="flex: 1 1 320px; max-width: 350px; min-width: 280px;">
          <div class="villa-card">
            <a data-fancybox="gallery-vale" href="images/Villa_Vale/picture1.jpg" data-caption="Villa Vale - Picture 1" class="image-container">
              <img src="images/Villa_Vale/picture1.jpg" alt="Villa Vale">
              <div class="overlay">
                <p>Cozy villa perfect for families, surrounded by nature and tranquility.</p>
              </div>
            </a>
            <a data-fancybox="gallery-vale" href="images/Villa_Vale/picture2.jpg" data-caption="Villa Vale - Picture 2"></a>
            <a data-fancybox="gallery-vale" href="images/Villa_Vale/picture3.jpg" data-caption="Villa Vale - Picture 3"></a>
            <a data-fancybox="gallery-vale" href="images/Villa_Vale/picture4.jpg" data-caption="Villa Vale - Picture 4"></a>
            <a data-fancybox="gallery-vale" href="images/Villa_Vale/picture5.jpg" data-caption="Villa Vale - Picture 5"></a>
            <a data-fancybox="gallery-vale" href="images/Villa_Vale/picture6.jpg" data-caption="Villa Vale - Picture 6"></a>
            <a data-fancybox="gallery-vale" href="images/Villa_Vale/picture7.jpg" data-caption="Villa Vale - Picture 7"></a>
            <a data-fancybox="gallery-vale" href="images/Villa_Vale/picture8.jpg" data-caption="Villa Vale - Picture 8"></a>
            <h3 class="villa-name-fixed">Villa Vale</h3>
          </div>
          <div class="villa-reviews-summary">
            <div class="review">
              <div class="review-header">
                <span class="reviewer">Phan</span>
                <span class="stars">★★★★★</span>
              </div>
              <p>Diese Unterkunft hat die volle Punktzahl verdient. Ausstattung, Lage und Besitzer, alles perfekt!</p>
            </div>
            <button class="btn show-all-reviews" data-modal="modal-vale">Show all reviews</button>
          </div>
        </div>

      </div>

      <!-- MODALS (hidden by default) -->
      <!-- Zara Modal -->
      <div class="villa-modal" id="modal-zara">
        <div class="villa-modal-content">
          <button class="villa-modal-close" onclick="closeModal('modal-zara')">&times;</button>
          <h2>All Reviews for Villa Zara</h2>
          <div class="reviews-container" id="reviews-zara"></div>
        </div>
      </div>

      <!-- Laura Modal -->
      <div class="villa-modal" id="modal-laura">
        <div class="villa-modal-content">
          <button class="villa-modal-close" onclick="closeModal('modal-laura')">&times;</button>
          <h2>All Reviews for Villa Laura</h2>
          <div class="reviews-container" id="reviews-laura"></div>
        </div>
      </div>

      <!-- Vale Modal -->
      <div class="villa-modal" id="modal-vale">
        <div class="villa-modal-content">
          <button class="villa-modal-close" onclick="closeModal('modal-vale')">&times;</button>
          <h2>All Reviews for Villa Vale</h2>
          <div class="reviews-container" id="reviews-vale"></div>
        </div>
      </div>

    </section>

    <section class="locations-section" id="locations">
      <h2>Our Locations</h2>
      <div class="map-container">
        <iframe 
          src="https://www.google.com/maps/d/embed?mid=1AFfTvRhazzn-5WSSSTJhIa8wftusTEc&ehbc=2E312F"
          width="80%" height="400" style="border:0; border-radius:16px; margin-top:2rem;"
          allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </section>

    <section class="contact-section" id="contact">
      <h2>Contact Us</h2>
      <p>Send us a message and we’ll get back to you soon.</p>
      <form action="https://formspree.io/f/YOUR_FORM_ID" method="POST" class="contact-form">
        <input type="text" name="name" placeholder="Your Name" required>
        <input type="email" name="_replyto" placeholder="Your Email" required>
        <textarea name="message" placeholder="Your Message" rows="5" required></textarea>
        <button class="btn">Send Message</button>
      </form>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script>
  <script>
    // Open modal
    document.querySelectorAll('.show-all-reviews').forEach(btn => {
      btn.addEventListener('click', function() {
        var modalId = this.getAttribute('data-modal');
        var reviewsFile = '';
        var reviewsContainer = '';
        if (modalId === 'modal-zara') {
          reviewsFile = 'villa-zara-reviews.html';
          reviewsContainer = 'reviews-zara';
        }
        if (modalId === 'modal-laura') {
          reviewsFile = 'villa-laura-reviews.html';
          reviewsContainer = 'reviews-laura';
        }
        if (modalId === 'modal-vale') {
          reviewsFile = 'villa-vale-reviews.html';
          reviewsContainer = 'reviews-vale';
        }
        // Only load if not already loaded
        var container = document.getElementById(reviewsContainer);
        if (!container.dataset.loaded) {
          fetch(reviewsFile)
            .then(response => response.text())
            .then(html => {
              // Extract only the reviews (assume .reviews-page-container in each file)
              const tempDiv = document.createElement('div');
              tempDiv.innerHTML = html;
              const reviews = tempDiv.querySelector('.reviews-page-container');
              container.innerHTML = reviews ? reviews.innerHTML : html;
              container.dataset.loaded = "true";
            });
        }
        document.getElementById(modalId).classList.add('open');
        document.body.style.overflow = 'hidden';
      });
    });
    // Close modal function
    function closeModal(id) {
      document.getElementById(id).classList.remove('open');
      document.body.style.overflow = '';
    }
    // Close modal on background click
    document.querySelectorAll('.villa-modal').forEach(modal => {
      modal.addEventListener('click', function(e) {
        if (e.target === modal) {
          modal.classList.remove('open');
          document.body.style.overflow = '';
        }
      });
    });
  </script>
</body>
</html>